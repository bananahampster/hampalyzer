<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />

    {{!-- this seems like a gigantic hack, should probably put metadata in top-level object --}}
    {{#with stats.[0]}}
    <title>Hampalyzer TFC Stats: {{map}} at {{server}} ({{date}}, {{time}})</title>
    {{/with}}

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <!-- hamp stylin' -->
    <link rel="stylesheet" href="/hamp2.css" />
</head>

<body>

    <nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-sm-3 mr-0" href="/">Hampalyzer &mdash; TFC Statistics</a>
        <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search" />
        <ul class="navbar-nav px-3">
            <li class="nav-item text-nowrap">
                <a class="nav-link" href="/logs.html">Other Logs</a>
            </li>
        </ul>
    </nav>

    <div class="container-fluid">
        {{{ body }}}
    </div>

    <script type="text/javascript">
    (() => {
        if ("IntersectionObserver" in window
            && "IntersectionObserverEntry" in window
            && "intersectionRatio" in window.IntersectionObserverEntry.prototype
        ) {
            const intersectionRatioThreshold = 0.3;
            document.querySelectorAll("#summary, #comp, #flag-pace, #parsing-errors").forEach((element) => {
                let observer = new IntersectionObserver(entries => {
                    entries.forEach((entry) => {
                        if (entry.intersectionRatio >= intersectionRatioThreshold) {
                            document.querySelector(`#${entry.target.id}-nav-link.nav-link`).classList.add("active");
                        } else {
                            document.querySelector(`#${entry.target.id}-nav-link.nav-link`).classList.remove("active");
                        }
                    });
                },
                {
                    threshold: [0, intersectionRatioThreshold]
                });
                observer.observe(element);
            });
        }
    })();
    </script>
</body>
</html>